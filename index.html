<!DOCTYPE html>
<html>
    <head>
        <title> simple ar.js </title>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/86/three.min.js"></script>        
        <script src="https://jeromeetienne.github.io/AR.js/three.js/build/ar.min.js"></script>

    </head>
    <body>

        <div id="container"></div>

        <script>

            var renderer,
                scene,
                camera,
                container;

            var arSource,
                arContext,
                arMarker;

            init();

            function init(){



                container = document.getElementById('container');

                renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
                scene = new THREE.Scene();
                camera = new THREE.Camera();

                renderer.setClearColor(0x000000, 0);
                renderer.setSize(window.innerWidth, window.innerHeight);

                container.appendChild(renderer.domElement);
                scene.add(camera);
                scene.visible = false;






                arSource = new THREEx.ArToolkitSource({
                    sourceType : 'webcam',
                });

                arContext = new THREEx.ArToolkitContext({
                    cameraParametersUrl: THREEx.ArToolkitContext.baseURL + '../data/data/camera_para.dat',
                    detectionMode: 'mono',
                });

                arMarker = new THREEx.ArMarkerControls(arContext, camera, {
                    type : 'pattern',
                    patternUrl : './data/patt.hiro',
                    changeMatrixMode: 'cameraTransformMatrix'
                });




                /* handle */
                arSource.init(function(){
                    arSource.onResize();
                    arSource.copySizeTo(renderer.domElement);

                    if(arContext.arController !== null) arSource.copySizeTo(arContext.arController.canvas);

                });

                arContext.init(function onCompleted(){
                    
                    camera.projectionMatrix.copy(arContext.getProjectionMatrix());

                });


                render();   
                
            }   




            function render(){
                requestAnimationFrame(render);
                renderer.render(scene,camera);                

                if(arSource.ready === false) return;

                arContext.update(arSource.domElement);
                scene.visible = camera.visible;

            }          

            
        </script>
    </body>
</html>